<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Discordblacklist</h1><h2>The Featured Nodejs package that facilitates getting banned Discord users from DiscordBans.</h2><h3>Installing via NPM.</h3><p><code>$ npm install --save discordblacklist</code></p>
<p>or to use JSON only for stringifying/serializing (more info below)</p>
<p><code>$ npm install --save discordblacklist --no-optional</code></p>
<p><strong>Note: Version 2.x API has changed from version 1.x to support DiscordBans v3 api. Version 2.x is not backwards compatible with version 1.x code. Package dependencies have also been updated so make sure you npm install properly.</strong></p>
<p>The following contains documentation for discordblacklist 2.0.0, read the 1.0.7 (the latest 1.x) documentation <a href="https://github.com/wzhouwzhou/discordblacklist/releases/tag/v1.0.7">here</a></p>
<h3>Quickstart:</h3><pre class="prettyprint source"><code>// Create the object (which autorefreshes the banlist every 120 minutes)
const { Blacklist } = require('discordblacklist');
const token = 'My-token';
const blacklist = new Blacklist({ token, update: true });

// Update the blacklist.
await blacklist.update();

// Someone's id to test
const someID = '1234567890';

// Check if they are on the banlist - Returns a true/false , or throws an error if an error occurred.
let isOnTheBanList = blacklist.lookup(someID);

// Get the full list in string JSON form. Must be used after update() has completed
const jsonified = blacklist.banstore.stringify(true);
console.log(jsonified);

// If you installed optional dependencies (erlpack) use this.
const bufferstring = blacklist.banstore.stringify(false);
console.log(bufferstring);

// If you want an Array of BannedUser objects
const array = blacklist.banstore.array();</code></pre><h3>Setup and functions.</h3><p><strong>Exports:</strong></p>
<p><code>require('discordblacklist')</code> will return an Object with several keys: Blacklist, Errors, BanStore, and Constants.</p>
<p>The Blacklist class can be set with</p>
<pre class="prettyprint source"><code>const { Blacklist } = require('discordblacklist');</code></pre><p>There are several ways to create an object from it, here's the simplest:</p>
<pre class="prettyprint source"><code>const apiToken = '12345'; // Replace with actual token
const blacklist = new Blacklist(apiToken);</code></pre><p>Get a token <a href="https://bans.discordlist.net/mytoken">here</a>.</p>
<p>To update the list Manually</p>
<pre class="prettyprint source"><code>const newlist = await blacklist.update();</code></pre><p>To get the list quickly without updating unless the internal cache was deleted blacklist.fetchBanlist();</p>
<pre class="prettyprint source"><code>const list = await blacklist.fetchBanlist();</code></pre><p>list and newList will contain a <BanStore> object which is a collection of BannedUser objects mapped by their banID. BannedUser objects have an id (userid), tag (discord tag), banID, bannedFor (reason), prooflink.
To strip any class data and just get them in pure object form just run <BannedUser>.serialize() or <BanStore>.serialize(), and to stringify them <BannedUser> or <BanStore>.stringify().</p>
<p><strong>It is recommended you update your ban list every two hours</strong></p>
<p>You can have the blacklist autoupdate at the recommended time like so:</p>
<pre class="prettyprint source"><code>const banlist = new Blacklist({ token: 'something', update: true });</code></pre><p>to customise the timer length (180 minutes in this example):</p>
<pre class="prettyprint source"><code>const banlist = new Blacklist({ token: 'something', update: 180 });</code></pre><p>to be completely explicit:</p>
<pre class="prettyprint source"><code>const banlist = new Blacklist({
  token: 'something',
  update: {
    autoupdate: true,
    minutes: 180,
  }
});</code></pre><p><strong>Looking up users.</strong></p>
<p>Convenience shortcut (only works after if banlist has been fetched and cached):</p>
<pre class="prettyprint source"><code>blacklist.lookup('id');</code></pre><p>'id' is the userid of the user you want to check. This returns either a BannedUser or null depending on if the user is on the ban list.</p>
<p><strong>Clearing and resetting your auto-updater</strong></p>
<p>To clear the autoupdater simply call <code>banlist.stopUpdateTimer();</code>. To then set a new one do <code>banlist.setUpdateTimer(minutes)</code> where minutes is an number.</p>
<p><strong>Changing token</strong></p>
<p>If for whatever reason you would like to switch tokens, you can do that easily by calling.
<code>banlist.changeToken('newtoken');</code></p>
<p>This work is Â©Copyright under the <code>GNU AFFERO GENERAL PUBLIC LICENSE Version 3</code>. See LICENSE for more details.</p>
<h3>Further Documentation:</h3><p><a href="https://wzhouwzhou.github.io/discordblacklist/">https://wzhouwzhou.github.io/discordblacklist/</a></p>
<p>Enjoy this package? Consider starring on <a href="https://github.com/wzhouwzhou/discordblacklist">github</a> and checking out some of my other work:</p>
<p><a href="https://npmjs.com/ytsearcher">Youtube Search API</a></p>
<p><a href="https://chipsbot.me/">Chips Discord Bot</a></p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Constants.html">Constants</a></li><li><a href="module-discordblacklist.html">discordblacklist</a></li><li><a href="module-ErrorEnum.html">ErrorEnum</a></li></ul><h3>Classes</h3><ul><li><a href="BannedUser.html">BannedUser</a></li><li><a href="BanStore.html">BanStore</a></li><li><a href="Blacklist.html">Blacklist</a></li><li><a href="ConnectionError.html">ConnectionError</a></li><li><a href="TimerError.html">TimerError</a></li><li><a href="TokenError.html">TokenError</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.0</a> on Wed Nov 29 2017 00:56:59 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>